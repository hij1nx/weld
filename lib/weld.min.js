(function(v){if(!Object.keys){var x=!0,y="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),z=y.length,A;for(A in{toString:null})x=!1;Object.keys=function(c){if("object"!==typeof c&&"function"!==typeof c||null===c)throw new TypeError("Object.keys called on a non-object");var e=[],f;for(f in c)c.hasOwnProperty(f)&&e.push(f);if(x)for(f=0;f<z;f++){var a=y[f];c.hasOwnProperty(a)&&e.push(a)}return e}}Array.prototype.indexOf||(Array.prototype.indexOf=
function(c){if(null==this)throw new TypeError;var e=Object(this),f=e.length>>>0;if(0===f)return-1;var a=0;0<arguments.length&&(a=Number(arguments[1]),a!=a?a=0:0!=a&&Infinity!=a&&-Infinity!=a&&(a=(0<a||-1)*Math.floor(Math.abs(a))));if(a>=f)return-1;for(a=0<=a?a:Math.max(f-Math.abs(a),0);a<f;a++)if(a in e&&e[a]===c)return a;return-1});var u="undefined"===typeof console?{log:function(){}}:console,h=!1;"undefined"!==typeof process&&process.title&&(h=!0);var B=/input|select|option|button/i,C=/img/i,D=
/textarea/i,E=/yes|true|1|ok/i,r=0,F=h?"\u001b[32m ?\u001b[37m":" Success",G=h?"\u001b[31m ?\u001b[37m":" Fail",H=function(c,e){var f=c.toUpperCase();return function(a,c,p,g){u.log(w(),(h?"\u001b[37m+ ":"+ ")+f+" -","parent:",l(a)+",","element:",l(c)+",","key:",l(p)+",","value:",l(g));r+=1;if(e)return a=e(a,c,p,g),--r,u.log(w(),"+ "+c+""+(!1!==a?F:G)),a;--r;t("- OPERATION NOT FOUND: ",f)}},w=function(){for(var c=r,e="";c--;)e+=h?" \u043a\u0430  ":" |   ";return e},t=function(){var c=Array.prototype.slice.call(arguments);
u.log(w(),c.join(" "))},l=function(c){var e=c+"";return h?"false"===e||"null"===e||""===e||"undefined"===e||"undefined"===typeof c||!1===c?(""===e&&(e="(empty string)"),"\u001b[31m"+e+"\u001b[37m"):"\u001b[33m"+e+"\u001b[37m":e};v.weld=function(c,e,f){var a,h,p,g={alias:{},debug:!1,insert:!1};if(f)for(h in f)f.hasOwnProperty(h)&&(g[h]=f[h]);p=g.debug;var k={siblings:function(a,b,m,d){var e,c,f=a.children;cs=f.length;for(b.weld={parent:a,classes:b.className.split(" ")};cs--;)if(m=f[cs],m===b)cs<f.length&&
(b.weld.insertBefore=f[cs+1]),p&&t("- REMOVE - element:",l(b),"class:",l(b.className),"id:",l(b.id)),a.removeChild(b);else{d=m.className.split(" ");e=d.length;for(c=!0;e--;)if(0>b.weld.classes.indexOf(d[e])){c=!1;break}c&&(p&&t("- REMOVE - element:",l(m),"class:",l(m.className),"id:",l(m.id)),a.removeChild(m))}},traverse:function(a,b,m,d,e){var c,f,g,h=b.parentNode;~{}.toString.call(d).indexOf("Date")&&(d=d.toString());if(d.nodeType||"object"!==typeof d)k.set(a,b,m,d,e);else if(d.length&&d[0])for(h?
k.siblings(h,b,m,d):b.weld&&b.weld.parent&&(h=b.weld.parent),m=d.length,a=0;a<m;a++){p&&t("- CLONE - element:",l(b),"class:",l(b.className),"id:",l(b.id));c=b.cloneNode(!0);c.weld={};if(b.weld){f=Object.keys(b.weld);e=f.length;for(var q;e--;)q=f[e],c.weld[q]=b.weld[q]}k.traverse(h,c,a,d[a],d[a]);k.insert(h,c,a,d[a])}else for(f=Object.keys(d),q=f.length;q--;){var n=f[q];g=d[n];c=k.match(b,b,n,g);1<n.length&&"@"==n[0]?(c=n.substr(1),"."==c?(~{}.toString.call(d).indexOf("Date")&&(d[n]=d[n].toString()),
(d.nodeType||"object"!==typeof d[n])&&k.set(a,b,m,d[n],e)):b.setAttribute(c,d[n])):c?k.traverse(b,c,n,g,e):!1!==c&&"object"===typeof g&&0<Object.keys(g).length&&k.traverse(h,b,n,g)}},elementType:function(a,b,c,d){if(b&&(a=b.nodeName,"string"===typeof a)){if(B.test(a))return"input";if(C.test(a))return"image";if(D.test(a))return"textarea"}},map:!1,insert:function(a,b){b.weld&&b.weld.insertBefore?a.insertBefore(b,b.weld.insertBefore):a.appendChild(b)},set:function(a,b,c,d,e){if(k.map&&!1===k.map(a,b,
c,d,e))return!1;p&&t("- SET: value is",d.tagName);a=k.elementType(a,b,c,d);if(d&&d.nodeType){for(b.ownerDocument!==d.ownerDocument?d=b.ownerDocument.importNode(d,!0):d.parentNode&&d.parentNode.removeChild(d);b.firstChild;)b.removeChild(b.firstChild);b.appendChild(d)}else"input"===a?"select"===b.tagName.toLowerCase()?b.value=d:"checkbox"===b.type.toLowerCase()?E.test(d)?b.setAttribute("checked",!0):b.hasAttribute("checked")&&b.removeAttribute("checked"):b.setAttribute("value",d):"image"===a?b.setAttribute("src",
d):"textarea"===a?(b.textContent=d,b.value!==d&&(b.value=d)):b.textContent=d;return!0},match:function(a,b,c,d){if("@"!=c[0]){if("undefined"!==typeof g.alias[c])if("function"===typeof g.alias[c])c=g.alias[c](a,b,c,d)||c;else{if(!1===g.alias[c])return!1;c=g.alias[c]}if(c&&c.nodeType)return c;if(b){if(b.querySelector)return b.querySelector("."+c+",#"+c+',[name="'+c+'"]');a=b.getElementsByTagName("*");b=a.length;var e;for(e=0;e<b;e++)if(d=a[e],d.id===c||d.name===c||-1<d.className.split(" ").indexOf(c))return d}}}};
for(a in k)k.hasOwnProperty(a)&&(currentOp=k[a],f=g[a]||k[a],p&&(f=H(a,f)),k[a]=f);k.traverse(null,c,null,e);g.debug&&u.log(c.outerHTML)};"undefined"!==typeof v.define&&v.define.amd&&define("weld",[],function(){return window.weld})})("undefined"!==typeof process&&"undefined"!==typeof process.title?exports:window);